"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[620],{1620:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var r=n(9439),a=n(2791),i=n(1541),d=n(785),o=n(3166),u=n(667).m.injectEndpoints({endpoints:function(e){return{fetchBanks:e.query({query:function(){return{url:"/directoriesBanks"}},providesTags:[{type:"Banks",id:"LIST"}]}),createBank:e.mutation({query:function(e){return{url:"/directoriesBanks",method:"POST",body:e}},onQueryStarted:function(e,t){var n=t.dispatch;t.queryFulfilled.then((function(e){var t=e.data;n(u.util.updateQueryData("fetchBanks","",(function(e){e.push(t)})))}))}}),updateBank:e.mutation({query:function(e){return{url:"/directoriesBanks/".concat(e.id),method:"PUT",body:e}},onQueryStarted:function(e,t){var n=t.dispatch;t.queryFulfilled.then((function(e){var t=e.data;n(u.util.updateQueryData("fetchBanks","",(function(e){var n=e.find((function(e){return e.id===t.id}));n&&Object.assign(n,t)})))}))}}),deleteBank:e.mutation({query:function(e){return{url:"/directoriesBanks/".concat(e),method:"DELETE"}},invalidatesTags:[{type:"Banks",id:"LIST"}]})}}}),c=u.useCreateBankMutation,l=u.useDeleteBankMutation,s=u.useFetchBanksQuery,m=u.useUpdateBankMutation,p=n(2426),h=n.n(p),f=function(){return[{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",key:"name",customFilter:"search",sorter:function(e,t){return e.name.localeCompare(t.name)},editable:!0,width:300},{title:"\u0411\u0418\u041a",dataIndex:"BIK",key:"BIK",customFilter:"search",align:"center",sorter:function(e,t){return e.BIK.localeCompare(t.BIK)},editable:!0,width:150},{title:"\u0418\u041d\u041d",dataIndex:"INN",key:"INN",customFilter:"search",align:"center",sorter:function(e,t){return e.INN.localeCompare(t.INN)},editable:!0,width:150},{title:"\u0414\u043d\u0435\u0432\u043d\u043e\u0439 \u043b\u0438\u043c\u0438\u0442",dataIndex:"dayLimit",key:"dayLimit",customFilter:"slider",align:"center",sorter:function(e,t){return e.dayLimit-t.dayLimit},editable:!0,editType:"number",width:150},{title:"\u041c\u0435\u0441\u044f\u0447\u043d\u044b\u0439 \u043b\u0438\u043c\u0438\u0442",dataIndex:"monthLimit",key:"monthLimit",customFilter:"slider",align:"center",sorter:function(e,t){return e.monthLimit-t.monthLimit},editable:!0,editType:"number",width:150},{title:"\u041a\u043e\u0440\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0442\u0441\u043a\u0438\u0439 \u0441\u0447\u0435\u0442",dataIndex:"cor_account",key:"cor_account",customFilter:"search",align:"center",sorter:function(e,t){return e.cor_account.localeCompare(t.cor_account)},editable:!0,width:200},{title:"\u041a\u0435\u043c \u0441\u043e\u0437\u0434\u0430\u043d\u043e",dataIndex:["created_by","name"],key:"created_by",customFilter:"search",align:"center",sorter:function(e,t){return e.created_by.name.localeCompare(t.created_by.name)},width:150,responsive:["xl"],editable:!1},{title:"\u041a\u043e\u0433\u0434\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u043e",dataIndex:"created_date",key:"created_date",customFilter:"date-picker",render:function(e){return e?h()(e).format("L"):"-"},sorter:function(e,t){return h()(e.created_date).diff(t.created_date)},align:"center",width:150,responsive:["xl"],editable:!1},{title:"\u041a\u0435\u043c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043e",dataIndex:["updated_by","name"],key:"updated_by",customFilter:"search",align:"center",sorter:function(e,t){var n,r,a,i;return null!==(n=null===(r=e.updated_by)||void 0===r?void 0:r.name.localeCompare(null!==(a=null===(i=t.updated_by)||void 0===i?void 0:i.name)&&void 0!==a?a:""))&&void 0!==n?n:0},render:function(e){return null!==e&&void 0!==e?e:"-"},width:150,responsive:["xxl"],editable:!1},{title:"\u041a\u043e\u0433\u0434\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043e",dataIndex:"updated_date",key:"updated_date",customFilter:"date-picker",render:function(e){return e?h()(e).format("L LT"):"-"},sorter:function(e,t){return h()(e.updated_date).diff(t.updated_date)},align:"center",width:150,responsive:["xxl"],editable:!1}]},y=n(6005),k=n(3344),g=n(184),b=function(e){return[{key:"name",name:[e,"name"],style:{minWidth:150,flexGrow:1},rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}],children:(0,g.jsx)(y.Z,{placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"})},{key:"BIK",name:[e,"BIK"],style:{width:100},rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}],children:(0,g.jsx)(y.Z,{placeholder:"\u0411\u0418\u041a"})},{key:"INN",name:[e,"INN"],style:{width:100},rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}],children:(0,g.jsx)(y.Z,{placeholder:"\u0418\u041d\u041d"})},{key:"dayLimit",name:[e,"dayLimit"],style:{width:100},rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}],children:(0,g.jsx)(k.Z,{placeholder:"\u0414\u043d\u0435\u0432\u043d\u043e\u0439 \u043b\u0438\u043c\u0438\u0442"})},{key:"monthLimit",name:[e,"monthLimit"],style:{width:100},rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}],children:(0,g.jsx)(k.Z,{placeholder:"\u041c\u0435\u0441\u044f\u0447\u043d\u044b\u0439 \u043b\u0438\u043c\u0438\u0442"})},{key:"cor_account",name:[e,"cor_account"],style:{width:200},rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}],children:(0,g.jsx)(y.Z,{placeholder:"\u041a\u043e\u0440\u0441\u0447\u0435\u0442"})}]},w=n(4165),x=n(1413),v=n(5861),Z=n(419),B=function(e){var t=e.user,n=e.createBank,r=e.deleteBank,i=e.updateBank,d=e.editForm,o=e.hideCreateModal,u=e.cancelEdit,c=e.selectedRowKeys,l=e.setSelectedRowKeys,s=(0,a.useCallback)((function(e){return n(e)}),[]),m=(0,a.useCallback)(function(){var e=(0,v.Z)((0,w.Z)().mark((function e(n){var r,a;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(r=n.banks)||void 0===r||!r.length){e.next=3;break}return a={type:"geographyCountries",deleted:!1,created_by:t,created_date:h()().toISOString(),updated_by:null,updated_date:null},e.abrupt("return",Promise.all(n.banks.map((function(e){return s((0,x.Z)((0,x.Z)({},a),e)).unwrap()}))).then((function(){Z.ZP.success("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"),o()})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),p=(0,a.useCallback)(function(){var e=(0,v.Z)((0,w.Z)().mark((function e(n){var r;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.validateFields();case 3:return(r=(0,x.Z)((0,x.Z)({},n),d.getFieldsValue())).updated_by=t,r.updated_date=h()().toISOString(),e.next=8,i(r).unwrap();case 8:Z.ZP.success("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e"),u(),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),[t]),f=(0,a.useCallback)((function(e){return r(e)}),[]);return{onGroupCreate:m,onUpdate:p,onGroupDelete:(0,a.useCallback)((0,v.Z)((0,w.Z)().mark((function e(){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Promise.all(c.map((function(e){return f(Number(e)).unwrap()}))).then((function(){Z.ZP.success("\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e"),l([])}));case 1:case"end":return e.stop()}}),e)}))),[c])}},_=n(2138),I=n(863),C=n(5751),L=n(913),F=n(4137),S=n(180),j=n(6698),K=n(3728),N=n(833),q=n(4669),E=n(9429),M=function(){var e=(0,K.a)(),t=(0,j.Z)(),n=t.width,u=t.height,p=s(""),h=p.data,y=p.isLoading,k=p.isFetching,w=p.error,x=m(),v=(0,r.Z)(x,2),Z=v[0],M=v[1],T=M.isLoading,D=M.error,P=c(),O=(0,r.Z)(P,2),R=O[0],G=O[1],Q=G.isLoading,U=G.error,z=l(),J=(0,r.Z)(z,2),V=J[0],W=J[1],A=W.isLoading,H=W.error,X=w||D||U||H,Y=(0,q.d)(),$=(0,r.Z)(Y,3),ee=$[0],te=$[1],ne=$[2],re=(0,a.useCallback)(b,[]),ae=(0,N.x)(),ie=ae.rowSelection,de=ae.selectedRowKeys,oe=ae.setSelectedRowKeys,ue=(0,E.k)(),ce=ue.edit,le=ue.editForm,se=ue.editingKey,me=ue.isEditing,pe=ue.cancelEdit,he=(0,a.useMemo)((function(){return{y:u-260}}),[u]),fe=(0,a.useMemo)((function(){return{onChange:pe,showSizeChanger:!0}}),[]),ye=(0,a.useMemo)((function(){return{body:{cell:F.nK}}}),[]),ke=B({user:e,editForm:le,cancelEdit:pe,hideCreateModal:ne,selectedRowKeys:de,setSelectedRowKeys:oe,createBank:R,deleteBank:V,updateBank:Z}),ge=ke.onUpdate,be=ke.onGroupCreate,we=ke.onGroupDelete,xe=(0,a.useMemo)((function(){return(0,S.U)({columns:f(),cancelEdit:pe,edit:ce,editingKey:se,isEditing:me,loading:T,onSave:ge})}),[se]),ve=(0,a.useMemo)((function(){return null!==h&&void 0!==h?h:[]}),[h]);return(0,g.jsxs)(_.F,{children:[(0,g.jsxs)("section",{className:"main-section",children:[(0,g.jsx)(I.Z,{deleteDisable:!de.length,deleteLoading:A,onOpenCreate:te,onDelete:we}),(0,g.jsx)(i.Z,{form:le,component:!1,children:(0,g.jsx)(C.Z,{components:ye,columns:xe,dataSource:ve,rowSelection:ie,loading:k||y,scroll:he,pagination:fe})}),!!X&&(0,g.jsx)(d.Z,{message:JSON.stringify(X),type:"error"})]}),(0,g.jsx)(o.Z,{width:1e3,open:ee,title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",centered:!0,footer:null,onCancel:ne,children:(0,g.jsx)(L.Z,{name:"banks",getfields:re,loading:Q,error:U,onFinish:be,width:n})})]})}}}]);
//# sourceMappingURL=620.8ef2ca83.chunk.js.map