(self.webpackChunkclient=self.webpackChunkclient||[]).push([[236],{7129:function(e,t,n){"use strict";n.d(t,{K:function(){return m},w:function(){return u}});var r=n(1413),i=n(2791),o=n(3344),a=n(184),l=function(e){return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({},e),{},{prefix:"\u20bd",style:{width:"100%"},step:1e3,formatter:function(e){return String(e).replace(/\B(?=(\d{3})+(?!\d))/g," ")},parser:function(e){return Number(e.replace(/\s/g,""))}}))},u=i.memo(l),s=n(5987),c=n(3734),d=["catalog"],f=function(e){var t=e.catalog,n=(0,s.Z)(e,d);return(0,a.jsx)(c.Z,(0,r.Z)((0,r.Z)({placeholder:"\u0432\u044b\u0431\u0440\u0430\u0442\u044c",allowClear:!0,showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().includes(e.toLowerCase())},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())}},n),{},{children:null===t||void 0===t?void 0:t.map((function(e){return(0,a.jsx)(c.Z.Option,{value:e.id,children:e.name},e.id)}))}))},m=i.memo(f)},5751:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var r,i=n(1413),o=n(5987),a=n(168),l=n(2791),u=n(3163),s=n(6444),c=n(9168),d=n(1355),f=n(1730),m=n(4137),h=n(3433),p=function e(t,n){if(!n)return"";var r;if(!Array.isArray(n))return null!==(r=t[n])&&void 0!==r?r:"";for(var i=(0,h.Z)(n),o=0;o<i.length;o++){var a=i[o];if(t[a]){var l=t[a];return 1===i.length?l:(i.shift(),e(l,i))}}return""},v=n(184),x=function(e){return function(t,n){var r=p(n,null!==e&&void 0!==e?e:"").toLowerCase();return!t||(null===r||void 0===r?void 0:r.includes(t.toString().toLowerCase()))}},g=function(e){return function(t,n){var r,i,o=p(n,null!==e&&void 0!==e?e:"");return!t||(null===(r=t[0])||void 0===r?void 0:r.isSameOrBefore(o))&&(null===(i=t[1])||void 0===i?void 0:i.isSameOrAfter(o))}},y=function(e){return function(t,n){var r=p(n,null!==e&&void 0!==e?e:"");return!t||t[0]<=Number(r)&&Number(r)<=t[1]}},Z=function(e,t,n){switch(t){case"date-picker":return{filterDropdown:function(e){return(0,v.jsx)(m.QR,(0,i.Z)({},e))},filterIcon:(0,v.jsx)(c.Z,{}),onFilter:g(e)};case"slider":return{filterDropdown:function(e){return(0,v.jsx)(m.wD,(0,i.Z)((0,i.Z)({},e),n))},filterIcon:(0,v.jsx)(d.Z,{}),onFilter:y(e)};case"search":return{filterDropdown:function(e){return(0,v.jsx)(m.sd,(0,i.Z)({},e))},filterIcon:(0,v.jsx)(f.Z,{}),onFilter:x(e)};default:return{}}},j=["columns"],b=(0,s.ZP)(u.Z)(r||(r=(0,a.Z)(["\n    width: 100%;\n    height: 100%;\n    .row-selected,\n    .row-selected:hover {\n        transition: 0.1s;\n    }\n    .ant-table-thead > tr > th, \n    .ant-table-tbody > tr > td, \n    .ant-table tfoot > tr > th, \n    .ant-table tfoot > tr > td {\n        padding: 8px 12px;\n    }\n"]))),w=function(e){var t=e.columns,n=(0,o.Z)(e,j),r=(0,l.useMemo)((function(){return null===t||void 0===t?void 0:t.map((function(e){return(0,i.Z)((0,i.Z)({},e),null!==e&&void 0!==e&&e.customFilter?Z(null===e||void 0===e?void 0:e.dataIndex,null===e||void 0===e?void 0:e.customFilter,null===e||void 0===e?void 0:e.initialSliderValues):null)}))}),[t]);return(0,v.jsx)(b,(0,i.Z)((0,i.Z)({},n),{},{rowKey:"id",columns:r,bordered:!0}))},k=l.memo(w)},4137:function(e,t,n){"use strict";n.d(t,{QR:function(){return c},sd:function(){return b},wD:function(){return g},Vp:function(){return E},nK:function(){return D}});var r=n(4942),i=n(2791),o=n(2426),a=n.n(o),l=n(894),u=n(184),s=function(e){var t;return(0,u.jsx)(l.Z.RangePicker,{format:"DD.MM.YYYY",placeholder:["\u043e\u0442","\u0434\u043e"],onChange:function(t){e.setSelectedKeys([t]),e.confirm(),!t&&e.clearFilters&&(e.clearFilters(),e.confirm())},ranges:(t={},(0,r.Z)(t,"\u0441\u0435\u0433\u043e\u0434\u043d\u044f",[a()(),a()()]),(0,r.Z)(t,"\u043d\u0435\u0434\u0435\u043b\u044f",[a()(),a()().add(1,"week")]),(0,r.Z)(t,"\u043c\u0435\u0441\u044f\u0446",[a()(),a()().add(1,"month")]),(0,r.Z)(t,"\u0433\u043e\u0434",[a()(),a()().add(1,"year")]),t)})},c=i.memo(s),d=n(3433),f=n(9439),m=n(6272),h=n(3099),p=n(7309),v=n(3036),x=function(e){var t=e.setSelectedKeys,n=e.confirm,r=e.clearFilters,o=e.min,a=void 0===o?0:o,l=e.max,s=void 0===l?100:l,c=e.step,x=void 0===c?10:c,g=e.symbol,y=void 0===g?"":g,Z=(0,i.useState)([a,s]),j=(0,f.Z)(Z,2),b=j[0],w=j[1],k=(0,i.useMemo)((function(){return{0:{style:{left:"0%",transform:"translateX(0%)",whiteSpace:"nowrap"},label:(0,v.Z)(a,3)+y},100:{style:{left:"100%",transform:"translateX(-100%)",whiteSpace:"nowrap"},label:(0,v.Z)(s,3)+y}}}),[s,a,y]),C=(0,i.useCallback)((function(e){return(0,v.Z)(null!==e&&void 0!==e?e:0,3)+y}),[y]);return(0,u.jsxs)("div",{style:{padding:8},children:[(0,u.jsx)(m.Z,{min:a,max:s,step:x,range:{draggableTrack:!0},tooltip:{formatter:C},marks:k,value:b,onChange:function(e){return w((0,d.Z)(e))},style:{marginBottom:30,display:"block"}}),(0,u.jsxs)(h.Z,{children:[(0,u.jsx)(p.Z,{type:"primary",onClick:function(){return function(e){t([e]),n()}(b)},size:"small",style:{width:200},children:"OK"}),(0,u.jsx)(p.Z,{onClick:function(){r&&r(),n(),w([a,s])},size:"small",style:{width:200},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"})]})]})},g=i.memo(x),y=n(6005),Z=n(1730),j=function(e){var t=e.setSelectedKeys,n=e.selectedKeys,r=e.confirm,i=e.clearFilters,o=function(e,t){t()};return(0,u.jsxs)("div",{style:{padding:8},children:[(0,u.jsx)(y.Z,{placeholder:"\u041f\u043e\u0438\u0441\u043a",value:n[0],onChange:function(e){return t(e.target.value?[e.target.value]:[])},onPressEnter:function(){return o(0,r)},style:{marginBottom:8,display:"block"}}),(0,u.jsxs)(h.Z,{children:[(0,u.jsx)(p.Z,{type:"primary",onClick:function(){return o(0,r)},icon:(0,u.jsx)(Z.Z,{}),size:"small",style:{width:90},children:"\u041f\u043e\u0438\u0441\u043a"}),(0,u.jsx)(p.Z,{onClick:function(){return i&&function(e,t){e(),o(0,t)}(i,r)},size:"small",style:{width:90},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"})]})]})},b=i.memo(j),w=n(1413),k=n(5987),C=n(3344),_=n(1541),S=n(7129),F=["editing","dataIndex","title","inputType","record","index","children","catalog"],I=function(e){var t=e.editing,n=e.dataIndex,r=(e.title,e.inputType),i=(e.record,e.index,e.children),o=e.catalog,a=(0,k.Z)(e,F);return(0,u.jsx)("td",(0,w.Z)((0,w.Z)({},a),{},{children:t?(0,u.jsx)(_.Z.Item,{name:n,style:{margin:0},rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}],children:function(){switch(r){case"number":return(0,u.jsx)(C.Z,{});case"select":return(0,u.jsx)(S.K,{catalog:o});default:return(0,u.jsx)(y.Z,{})}}()}):i}))},D=i.memo(I),K=n(5323),T=n(732),M=n(1752),L=n(1520),O=n(5945),P=function(e){var t=e.editable,n=e.edit,r=e.cancelEdit,i=e.editingKey,o=e.loading,a=e.save,l=e.record;return t?(0,u.jsxs)(h.Z,{children:[(0,u.jsx)(L.Z,{title:"\u0412\u044b \u0442\u043e\u0447\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f?",onConfirm:function(){return a(l)},children:(0,u.jsx)(O.Z,{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:(0,u.jsx)(p.Z,{loading:o,icon:(0,u.jsx)(K.Z,{})})})}),(0,u.jsx)(O.Z,{title:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",children:(0,u.jsx)(p.Z,{onClick:r,icon:(0,u.jsx)(T.Z,{})})})]}):(0,u.jsx)(O.Z,{title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",children:(0,u.jsx)(p.Z,{disabled:""!==i,onClick:function(){return n(l)},icon:(0,u.jsx)(M.Z,{})})})},E=i.memo(P)},863:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r,i=n(9439),o=n(168),a=n(2791),l=n(6444),u=n(3099),s=n(7309),c=n(1520),d=n(9031),f=n(2622),m=n(7129);!function(e){e.all="\u0412\u0441\u0435",e.user="\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u0439"}(r||(r={}));var h,p=n(184),v=l.ZP.div(h||(h=(0,o.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    gap: 8px;\n    flex-wrap: wrap;\n"]))),x=function(e){var t=e.onOpenCreate,n=e.deleteLoading,o=e.deleteDisable,l=e.onDelete,h=e.userFilter,x=e.onChangeFilter,g=e.userSelect,y=void 0!==g&&g,Z=e.children,j=(0,a.useMemo)((function(){return Object.entries(r).map((function(e){var t=(0,i.Z)(e,2);return{id:t[0],name:t[1]}}))}),[]);return(0,p.jsxs)(v,{children:[(0,p.jsxs)(u.Z,{wrap:!0,children:[(0,p.jsxs)(s.Z,{onClick:t,children:[(0,p.jsx)(d.Z,{}),(0,p.jsx)("span",{children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]}),(0,p.jsx)(c.Z,{disabled:o,placement:"bottom",title:"\u0412\u044b \u0442\u043e\u0447\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u044d\u0442\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c?",onConfirm:l,okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:(0,p.jsxs)(s.Z,{loading:n,disabled:o,children:[(0,p.jsx)(f.Z,{}),(0,p.jsx)("span",{children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})}),Z]}),y&&(0,p.jsx)(m.K,{catalog:j,defaultValue:h,style:{width:155},onChange:x,allowClear:!1})]})},g=a.memo(x)},2138:function(e,t,n){"use strict";n.d(t,{F:function(){return o}});var r,i=n(168),o=n(6444).ZP.div(r||(r=(0,i.Z)(["\n    width: 100%;\n    height: 100%;\n\n    .main-section {\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n    }\n"])))},5348:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Le}});var r,i,o=n(9439),a=n(2791),l=n(521),u=n(785),s=n(8885),c=n(667),d=n(7786),f=c.m.injectEndpoints({endpoints:function(e){return{fetchDeals:e.query({query:function(){return{url:"/deals"}},onQueryStarted:function(e,t){var n=t.dispatch;t.queryFulfilled.then((function(e){})).catch((function(e){return 401===e.error.status&&n(d.hI.logout())}))},providesTags:[{type:"Deals",id:"LIST"}]}),createDeal:e.mutation({query:function(e){return{url:"/deals",method:"POST",body:e}},onQueryStarted:function(e,t){var n=t.dispatch;t.queryFulfilled.then((function(e){var t=e.data;n(f.util.updateQueryData("fetchDeals","",(function(e){e.push(t)})))}))}}),updateDeal:e.mutation({query:function(e){return{url:"/deals/".concat(e.id),method:"PUT",body:e}},onQueryStarted:function(e,t){var n=t.dispatch;t.queryFulfilled.then((function(e){var t=e.data;n(f.util.updateQueryData("fetchDeals","",(function(e){var n=e.find((function(e){return e.id===t.id}));n&&Object.assign(n,t)})))}))}}),deleteDeal:e.mutation({query:function(e){return{url:"/deals/".concat(e),method:"DELETE"}},invalidatesTags:function(e,t,n){return t?[]:[{type:"Deals",id:"LIST"}]}})}}}),m=f.useCreateDealMutation,h=f.useDeleteDealMutation,p=f.useFetchDealsQuery,v=f.useUpdateDealMutation,x=(f.useLazyFetchDealsQuery,c.m.injectEndpoints({endpoints:function(e){return{fetchCustomers:e.query({query:function(){return{url:"/customers"}},onQueryStarted:function(e,t){var n=t.dispatch;t.queryFulfilled.then((function(e){})).catch((function(e){return 401===e.error.status&&n(d.hI.logout())}))},providesTags:[{type:"Customers",id:"LIST"}]}),createCustomer:e.mutation({query:function(e){return{url:"/customers",method:"POST",body:e}},onQueryStarted:function(e,t){var n=t.dispatch;t.queryFulfilled.then((function(e){var t=e.data;n(x.util.updateQueryData("fetchCustomers","",(function(e){e.push(t)})))}))}}),updateCustomer:e.mutation({query:function(e){return{url:"/customers/".concat(e.id),method:"PUT",body:e}},onQueryStarted:function(e,t){var n=t.dispatch;t.queryFulfilled.then((function(e){var t=e.data;n(x.util.updateQueryData("fetchCustomers","",(function(e){var n=e.find((function(e){return e.id===t.id}));n&&Object.assign(n,t)})))}))}}),deleteCustomer:e.mutation({query:function(e){return{url:"/customers/".concat(e),method:"DELETE"}},invalidatesTags:function(e,t,n){return t?[]:[{type:"Customers",id:"LIST"}]}})}}})),g=(x.useCreateCustomerMutation,x.useDeleteCustomerMutation,x.useFetchCustomersQuery);x.useUpdateCustomerMutation,x.useLazyFetchCustomersQuery;!function(e){e.favor="\u041e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433",e.contracts="\u041f\u043e\u0434\u0440\u044f\u0434\u043d\u044b\u0435 \u0440\u0430\u0431\u043e\u0442\u044b",e.outsource="\u0410\u0443\u0441\u043e\u0440\u0441\u0438\u043d\u0433"}(r||(r={})),function(e){e.sighed="\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d",e.terminated="\u0420\u0430\u0441\u0442\u043e\u0440\u0433\u043d\u0443\u0442",e.on_considering="\u041d\u0430 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u0438"}(i||(i={}));var y,Z={name:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",comments:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",number:"\u041d\u043e\u043c\u0435\u0440",status:"\u0421\u0442\u0430\u0442\u0443\u0441",auto_prolongation:"\u0410\u0432\u0442\u043e\u043f\u0440\u043e\u043b\u043e\u043d\u0433\u0430\u0446\u0438\u044f",include_into_count:"\u2116 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0441\u0447\u0435\u0442e",address_into_count:"A\u0434\u0440\u0435\u0441 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u0432 \u0441\u0447\u0435\u0442e",company:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",subject:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",name_1c:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 1\u0421",price:"\u0426\u0435\u043d\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",customers:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0438",contract_date:"\u0414\u0430\u0442\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",end_date:"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"},j=n(1752),b=n(3500),w=n(732),k=n(3099),C=n(5945),_=n(7309),S=n(5594),F=n(184),I=function(e){var t=e.activeKey,n=e.edit,r=e.onEdit,i=e.onClose,o=e.isAttachments,a=e.openAttachments;return"1"===t?(0,F.jsxs)(k.Z,{wrap:!0,children:[(0,F.jsx)(C.Z,{title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",children:(0,F.jsx)(_.Z,{disabled:!n,onClick:r,children:(0,F.jsx)(j.Z,{})})}),(0,F.jsx)(C.Z,{title:"\u0412\u043b\u043e\u0436\u0435\u043d\u0438\u044f",children:(0,F.jsx)(S.Z,{dot:!0,style:{display:o?"block":"none"},children:(0,F.jsx)(_.Z,{onClick:a,children:(0,F.jsx)(b.Z,{})})})}),(0,F.jsx)(C.Z,{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",children:(0,F.jsx)(_.Z,{onClick:i,children:(0,F.jsx)(w.Z,{})})})]}):(0,F.jsx)(_.Z,{onClick:i,children:(0,F.jsx)(w.Z,{})})},D=a.memo(I),K=n(168),T=n(6444),M=n(5751),L=n(2426),O=n.n(L),P=n(7528);!function(e){e.create="\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435",e.update="\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435",e.delete="\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435"}(y||(y={}));var E,q,N,V=[{text:y.create,value:"create"},{text:y.update,value:"update"},{text:y.delete,value:"delete"}],A=function(){return[{title:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",dataIndex:["who","name"],key:"who",customFilter:"search",align:"center",width:140},{title:"\u0414\u0430\u0442\u0430 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f",dataIndex:"when",key:"when",customFilter:"date-picker",render:function(e){return e?O()(e).format("L LT"):"-"},sorter:function(e,t){return O()(e.when).diff(t.when)},defaultSortOrder:"descend",align:"center",width:140},{title:"\u0422\u0438\u043f \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f",dataIndex:"change_type",key:"change_type",filters:V,onFilter:function(e,t){return 0===t.change_type.indexOf(String(e))},sorter:function(e,t){return e.change_type.localeCompare(t.change_type)},render:function(e,t){return y[t.change_type]},align:"center",width:140},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u044b \u043f\u043e\u043b\u044f",dataIndex:"what",key:"what",render:function(e,t){return Array.isArray(t.what)&&t.what.map((function(e,t){return(0,F.jsx)(P.Z,{color:"blue",style:{margin:"2px"},children:Z[e]},t)}))},align:"center",width:200}]},R=T.ZP.div(E||(E=(0,K.Z)(["\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n    .ant-table-title {\n        padding: 1px 1px 1px 4px;\n    }\n"]))),Q=function(e){var t=e.data,n=e.title,r=(0,a.useMemo)((function(){return null!==t&&void 0!==t?t:[]}),[t]),i=(0,a.useMemo)((function(){return{x:600}}),[]);return(0,F.jsx)(R,{children:(0,F.jsx)(M.Z,{title:function(){return(0,F.jsx)(l.Z.Title,{level:5,children:n})},columns:A(),dataSource:r,pagination:!1,scroll:i})})},z=a.memo(Q),B=n(2014),U=n(3036),Y=[{text:r.favor,value:"favor"},{text:r.contracts,value:"contracts"},{text:r.outsource,value:"outsource"}],G=[{text:i.sighed,value:"sighed"},{text:i.terminated,value:"terminated"},{text:i.on_considering,value:"on_considering"}],J=function(e){return[{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",key:"name",customFilter:"search",align:"center",fixed:"left",width:200},{title:"\u041d\u043e\u043c\u0435\u0440",dataIndex:"number",key:"number",customFilter:"search",align:"center",width:120,responsive:["sm"]},{title:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",dataIndex:"company",key:"company",customFilter:"search",sorter:function(e,t){var n,r,i;return null!==(n=null===(r=e.company)||void 0===r?void 0:r.localeCompare(null!==(i=t.company)&&void 0!==i?i:""))&&void 0!==n?n:0},align:"center",width:150,responsive:["sm"]},{title:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"subject",key:"subject",filters:Y,onFilter:function(e,t){var n;return 0===(null===(n=t.subject)||void 0===n?void 0:n.indexOf(String(e)))},sorter:function(e,t){var n,r,i;return null!==(n=null===(r=e.subject)||void 0===r?void 0:r.localeCompare(null!==(i=t.subject)&&void 0!==i?i:""))&&void 0!==n?n:0},render:function(e,t){return t.subject&&r[t.subject]},align:"center",width:150,responsive:["md"]},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",key:"status",filters:G,onFilter:function(e,t){var n;return 0===(null===(n=t.status)||void 0===n?void 0:n.indexOf(String(e)))},sorter:function(e,t){var n,r,i;return null!==(n=null===(r=e.status)||void 0===r?void 0:r.localeCompare(null!==(i=t.status)&&void 0!==i?i:""))&&void 0!==n?n:0},render:function(e,t){return t.status&&i[t.status]},align:"center",width:150,responsive:["md"]},{title:"\u0426\u0435\u043d\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"price",key:"price",customFilter:"slider",initialSliderValues:{min:0,max:1e6,step:1e3,symbol:" \u20bd"},sorter:function(e,t){var n,r;return(null!==(n=e.price)&&void 0!==n?n:0)-(null!==(r=t.price)&&void 0!==r?r:0)},render:function(e){return(0,U.Z)(e,3)+" \u20bd"},align:"center",width:130,responsive:["lg"]},{title:"\u0414\u0430\u0442\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u0438\u044f",dataIndex:"contract_date",key:"contract_date",customFilter:"date-picker",render:function(e){return e?O()(e).format("L"):"-"},sorter:function(e,t){return O()(e.contract_date).diff(t.contract_date)},align:"center",width:150,responsive:["lg"]},{title:"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f",dataIndex:"end_date",key:"end_date",customFilter:"date-picker",render:function(e){return e?O()(e).format("L"):"-"},sorter:function(e,t){return O()(e.end_date).diff(t.end_date)},align:"center",width:150,responsive:["lg"]},{title:(0,F.jsx)(C.Z,{title:"\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043f\u0440\u043e\u0434\u043b\u0435\u043d\u0438\u0435 \u0441\u0440\u043e\u043a\u0430 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",children:"\u041f\u0440\u043e\u043b\u043e\u043d\u0433\u0430\u0446\u0438\u044f"}),dataIndex:"auto_prolongation",key:"auto_prolongation",render:function(e,t){return(0,F.jsx)(B.Z,{checked:t.auto_prolongation})},align:"center",width:130,responsive:["xl"]},{title:(0,F.jsx)(C.Z,{title:"\u0423\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u043d\u043e\u043c\u0435\u0440\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0441\u0447\u0435\u0442\u0435",children:"\u041d\u043e\u043c\u0435\u0440 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"}),dataIndex:"include_into_count",key:"include_into_count",render:function(e,t){return(0,F.jsx)(B.Z,{checked:t.include_into_count})},align:"center",width:130,responsive:["xl"]},{title:(0,F.jsx)(C.Z,{title:"\u0423\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0430\u0434\u0440\u0435\u0441\u0430 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u0432 \u0441\u0447\u0435\u0442\u0435",children:"\u0410\u0434\u0440\u0435\u0441 \u043e\u0431\u044a\u0435\u043a\u0442\u0430"}),dataIndex:"address_into_count",key:"address_into_count",render:function(e,t){return(0,F.jsx)(B.Z,{checked:t.address_into_count})},align:"center",width:130,responsive:["xl"]},{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 1\u0421",dataIndex:"name_1c",key:"name_1c",customFilter:"search",align:"center",width:150,responsive:["xl"]},{title:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0438",dataIndex:"customers",key:"customers",filters:null===e||void 0===e?void 0:e.map((function(e){return{text:e.name,value:e.id}})).sort((function(e,t){return e.text.localeCompare(t.text)})),onFilter:function(e,t){var n,r;return null!==(n=null===(r=t.customers)||void 0===r?void 0:r.some((function(t){return t.id===e})))&&void 0!==n&&n},render:function(e,t){var n;return(0,F.jsx)(F.Fragment,{children:null===(n=t.customers)||void 0===n?void 0:n.map((function(e){return(0,F.jsx)(C.Z,{title:"\u0418\u041d\u041d: ".concat(e.INN,", \u041a\u041f\u041f: ").concat(e.KPP),children:(0,F.jsx)(P.Z,{color:"blue",children:e.name},e.id)})}))})},align:"center",width:200,responsive:["xl"]}]},W=n(6005),X=n(894),H=n(7129),$=function(e,t){return[{key:"name",name:"name",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",rules:[{required:!0}],children:(0,F.jsx)(W.Z,{})},{key:"number",name:"number",label:"\u041d\u043e\u043c\u0435\u0440",rules:[{required:!0}],children:(0,F.jsx)(W.Z,{})},{key:"company",name:"company",label:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",rules:[{required:!0}],children:(0,F.jsx)(W.Z,{})},{key:"subject",name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",children:(0,F.jsx)(H.K,{catalog:null===t||void 0===t?void 0:t.subjects,onChange:function(t){return e.setFieldValue("subject",void 0===t?null:t)}})},{key:"status",name:"status",label:"\u0421\u0442\u0430\u0442\u0443\u0441",children:(0,F.jsx)(H.K,{catalog:null===t||void 0===t?void 0:t.statuses,onChange:function(t){return e.setFieldValue("status",void 0===t?null:t)}})},{key:"name_1c",name:"name_1c",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 1\u0421",children:(0,F.jsx)(W.Z,{})},{key:"customers",name:"customers",label:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0438",children:(0,F.jsx)(H.K,{catalog:null===t||void 0===t?void 0:t.customers,onChange:function(t){return e.setFieldValue("customers",void 0===t?null:t)}})},{key:"price",name:"price",label:"\u0426\u0435\u043d\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",children:(0,F.jsx)(H.w,{})},{key:"contract_date",name:"contract_date",label:"\u0414\u0430\u0442\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",children:(0,F.jsx)(X.Z,{onChange:function(t){var n;return e.setFieldValue("contract_date",null!==(n=null===t||void 0===t?void 0:t.toISOString())&&void 0!==n?n:null)},format:"L"}),getValueProps:function(e){return{value:e?O()(e):void 0}}},{key:"end_date",name:"end_date",label:"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",children:(0,F.jsx)(X.Z,{onChange:function(t){var n;return e.setFieldValue("end_date",null!==(n=null===t||void 0===t?void 0:t.toISOString())&&void 0!==n?n:null)},format:"L"}),getValueProps:function(e){return{value:e?O()(e):void 0}}},{key:"auto_prolongation",name:"auto_prolongation",label:"\u0410\u0432\u0442\u043e\u043f\u0440\u043e\u043b\u043e\u043d\u0433\u0430\u0446\u0438\u044f",valuePropName:"checked",children:(0,F.jsx)(B.Z,{})},{key:"include_into_count",name:"include_into_count",label:"\u2116 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0441\u0447\u0435\u0442e",valuePropName:"checked",children:(0,F.jsx)(B.Z,{})},{key:"address_into_count",name:"address_into_count",label:"A\u0434\u0440\u0435\u0441 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u0432 \u0441\u0447\u0435\u0442e",valuePropName:"checked",children:(0,F.jsx)(B.Z,{})},{key:"comments",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",children:(0,F.jsx)(W.Z.TextArea,{})}]},ee=function(e,t){return[{key:"name",name:"name",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",rules:[{required:!0}],children:(0,F.jsx)(W.Z,{})},{key:"number",name:"number",label:"\u041d\u043e\u043c\u0435\u0440",rules:[{required:!0}],children:(0,F.jsx)(W.Z,{})},{key:"company",name:"company",label:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",rules:[{required:!0}],children:(0,F.jsx)(W.Z,{})},{key:"subject",name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",children:(0,F.jsx)(H.K,{catalog:null===t||void 0===t?void 0:t.subjects})},{key:"status",name:"status",label:"\u0421\u0442\u0430\u0442\u0443\u0441",children:(0,F.jsx)(H.K,{catalog:null===t||void 0===t?void 0:t.statuses})},{key:"name_1c",name:"name_1c",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 1\u0421",children:(0,F.jsx)(W.Z,{})},{key:"customers",name:"customers",label:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0438",children:(0,F.jsx)(H.K,{catalog:null===t||void 0===t?void 0:t.customers,mode:"multiple"})},{key:"price",name:"price",label:"\u0426\u0435\u043d\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",children:(0,F.jsx)(H.w,{})},{key:"contract_date",name:"contract_date",label:"\u0414\u0430\u0442\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",children:(0,F.jsx)(X.Z,{format:"L"})},{key:"end_date",name:"end_date",label:"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",children:(0,F.jsx)(X.Z,{format:"L"})},{key:"auto_prolongation",name:"auto_prolongation",valuePropName:"checked",children:(0,F.jsx)(B.Z,{children:"\u0410\u0432\u0442\u043e\u043f\u0440\u043e\u043b\u043e\u043d\u0433\u0430\u0446\u0438\u044f"}),wrapperCol:{xs:{offset:0},sm:{offset:12}}},{key:"include_into_count",name:"include_into_count",valuePropName:"checked",children:(0,F.jsx)(B.Z,{children:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u2116 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0441\u0447\u0435\u0442"}),wrapperCol:{xs:{offset:0},sm:{offset:12}}},{key:"address_into_count",name:"address_into_count",valuePropName:"checked",children:(0,F.jsx)(B.Z,{children:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0430\u0434\u0440\u0435\u0441 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u0432 \u0441\u0447\u0435\u0442"}),wrapperCol:{xs:{offset:0},sm:{offset:12}}},{key:"comments",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",children:(0,F.jsx)(W.Z.TextArea,{})}]},te=n(3433),ne=n(4165),re=n(1413),ie=n(5861),oe=n(419),ae=n(4261),le=n(4058),ue=n.n(le),se=function(e){var t=e.user,n=e.createDeal,r=e.updateDeal,i=e.deleteDeal,o=e.createClose,l=e.selectedRowKeys,u=e.setSelectedRowKeys,s=e.resetSelectedItem,c=e.selectedItem,d=e.changeSelectedItem,f=e.offEdit,m=(0,a.useMemo)((function(){return{comments:null,customers:[],contract_date:null,end_date:null,name_1c:null,price:null,status:null,subject:null,auto_prolongation:!1,include_into_count:!1,address_into_count:!1}}),[]),h=(0,a.useCallback)(function(){var e=(0,ie.Z)((0,ne.Z)().mark((function e(r){var i,a;return(0,ne.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=(0,re.Z)({},r),a=O()().toISOString(),i.contract_date=(0,L.isMoment)(r.contract_date)?r.contract_date.toISOString():null,i.end_date=(0,L.isMoment)(r.end_date)?r.end_date.toISOString():null,i.type="deal",i.deleted=!1,i.created_by=t,i.created_date=a,i.updated_by=null,i.updated_date=null,i.attachments=[],i.history_log=[{id:(0,ae.Z)(),who:t,change_type:"create",what:[],when:a}],n(i).unwrap().then((function(){oe.ZP.success("\u0414\u043e\u0433\u043e\u0432\u043e\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d"),o()}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),p=(0,a.useCallback)((function(e){return i(e)}),[]),v=(0,a.useCallback)((0,ie.Z)((0,ne.Z)().mark((function e(){return(0,ne.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Promise.all(l.map((function(e){return p(Number(e)).unwrap()}))).then((function(){oe.ZP.success("\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e"),u([]),s()}));case 1:case"end":return e.stop()}}),e)}))),[l]),x=(0,a.useCallback)((function(e){var n=(0,re.Z)((0,re.Z)({},null!==c&&void 0!==c?c:{}),e),i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Object.keys(e).forEach((function(r){ue()(e[r],t[r])||n.push(r)})),n}(null!==c&&void 0!==c?c:{},n);if(i.length){var o=O()().toISOString();n.updated_by=t,n.updated_date=o,n.history_log=[].concat((0,te.Z)(null===c||void 0===c?void 0:c.history_log),[{id:(0,ae.Z)(),who:t,change_type:"update",when:o,what:i}]),r(n).unwrap().then((function(e){oe.ZP.success("\u0414\u043e\u0433\u043e\u0432\u043e\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d"),d(e),f()}))}else f()}),[c,t]);return{onCreate:h,createInitialValues:m,onGroupDelete:v,onUpdate:x}},ce=n(3166),de=n(8483),fe=n(6776),me=function(e){var t=e.attachments,n=e.isModalVisible,r=e.hideModal,i=(0,a.useState)([]),l=(0,o.Z)(i,2),s=l[0],c=l[1],d=(0,a.useCallback)((function(){return c((0,te.Z)(null!==t&&void 0!==t?t:[]))}),[t]),f=(0,a.useState)(!1),m=(0,o.Z)(f,2),h=m[0],p=m[1],v=(0,a.useState)(null),x=(0,o.Z)(v,2),g=x[0],y=x[1],Z=function(){var e=(0,ie.Z)((0,ne.Z)().mark((function e(){return(0,ne.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(null),p(!0);try{oe.ZP.success("\u0424\u0430\u0439\u043b\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u044b"),setTimeout((function(){p(!1),r()}),1500)}catch(t){y(t)}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){d()}),[d]),(0,F.jsxs)(ce.Z,{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432",open:n,okText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",onOk:Z,confirmLoading:h,onCancel:function(){d(),r()},children:[(0,F.jsxs)(de.Z.Dragger,{name:"file",multiple:!0,beforeUpload:function(){return!1},onChange:function(e){"removed"===e.file.status?c((function(t){return t.filter((function(t){return t.uid!==e.file.uid}))})):c((function(t){return[].concat((0,te.Z)(t),[e.file])}))},fileList:s,children:[(0,F.jsx)("p",{className:"ant-upload-drag-icon",children:(0,F.jsx)(fe.Z,{})}),(0,F.jsx)("p",{className:"ant-upload-text",children:"\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0444\u0430\u0439\u043b, \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"}),(0,F.jsx)("p",{className:"ant-upload-hint",children:"\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043e\u0434\u043d\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430 \u0438\u043b\u0438 \u0433\u0440\u0443\u043f\u043f\u044b \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432"})]}),!!g&&(0,F.jsx)(u.Z,{type:"error",message:g})]})},he=a.memo(me),pe=n(863),ve=n(1541),xe=function(e){var t=e.getFields,n=e.onFinish,r=e.error,i=e.loading,l=e.initialValues,s=e.catalogs,c=ve.Z.useForm(),d=(0,o.Z)(c,1)[0],f=(0,a.useMemo)((function(){return t(d,s)}),[s,d,t]),m=(0,a.useMemo)((function(){return{wrapperCol:{xs:{offset:0},sm:{offset:12}}}}),[]),h=(0,a.useCallback)((function(){return d.resetFields()}),[d]),p=(0,a.useCallback)((function(e){n(e).then(h)}),[n,h]);return(0,F.jsxs)(ve.Z,{form:d,onFinish:p,onReset:h,initialValues:l,autoComplete:"off",labelCol:{span:12},wrapperCol:{span:12},children:[f.map((function(e){return(0,F.jsx)(ve.Z.Item,(0,re.Z)({},e))})),!!r&&(0,F.jsx)(ve.Z.Item,{children:(0,F.jsx)(u.Z,{message:JSON.stringify(r),type:"error"})}),(0,F.jsx)(ve.Z.Item,(0,re.Z)((0,re.Z)({},m),{},{children:(0,F.jsxs)(k.Z,{children:[(0,F.jsx)(_.Z,{loading:i,type:"primary",htmlType:"submit",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"}),(0,F.jsx)(_.Z,{htmlType:"reset",children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"})]})}))]})},ge=a.memo(xe),ye=T.ZP.div(q||(q=(0,K.Z)(["\n    width: 100%;\n    height: 100%;\n    overflow-y: auto;\n\n    .ant-form-item {\n        margin-bottom: 12px;\n    }\n    .ant-form-item-label {\n        padding: 0;\n    }\n"]))),Ze=function(e){var t=e.edit,n=e.offEdit,r=e.selected,i=e.getFields,l=e.onFinish,s=e.loading,c=e.error,d=e.catalogs,f=ve.Z.useForm(),m=(0,o.Z)(f,1)[0],h=(0,a.useMemo)((function(){return i(m,d)}),[d,m,i]),p=(0,a.useMemo)((function(){return{wrapperCol:{xs:{offset:0},sm:{offset:12}}}}),[]);return(0,a.useEffect)((function(){r&&m.setFieldsValue(r)}),[m,r]),(0,F.jsx)(ye,{children:(0,F.jsxs)(ve.Z,{form:m,onFinish:l,onReset:function(){r&&m.setFieldsValue(r),n()},disabled:t,labelCol:{span:12},wrapperCol:{span:12},children:[h.map((function(e){return(0,F.jsx)(ve.Z.Item,(0,re.Z)({},e))})),!!c&&(0,F.jsx)(ve.Z.Item,{children:(0,F.jsx)(u.Z,{message:JSON.stringify(c),type:"error"})}),!t&&(0,F.jsx)(ve.Z.Item,(0,re.Z)((0,re.Z)({},p),{},{children:(0,F.jsxs)(k.Z,{children:[(0,F.jsx)(_.Z,{loading:s,htmlType:"submit",type:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),(0,F.jsx)(_.Z,{htmlType:"reset",children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})}))]})})},je=a.memo(Ze),be=n(3515),we=(0,T.ZP)(be.Z)(N||(N=(0,K.Z)(["\n    height: 100%;\n    width: 100%;\n\n    .ant-tabs, \n    .ant-tabs-content,\n    .ant-tabs-content-holder,\n    .ant-tabs-tabpane {\n        height: 100%;\n        width: 100%;\n    }\n\n    .ant-tabs-tab {\n        padding: 0;\n    }\n    .ant-tabs-nav::before {\n    bottom: -8px;\n}\n"]))),ke=function(e){var t=e.activeKey,n=e.toggleActiveKey,r=e.tabsBar,i=e.tabsItems,o=(0,a.useMemo)((function(){return{right:r}}),[r]);return(0,F.jsx)(we,{activeKey:t,onChange:n,tabBarExtraContent:o,items:i})},Ce=a.memo(ke),_e=n(7196),Se=function(e){var t=e.mainSection,n=e.viewSection,r=e.selectedItem,i=e.width,o=i>940,a=i<940;return(0,F.jsxs)(_e.gs,{orientation:"vertical",windowResizeAware:!0,style:{display:o?"flex":"block"},children:[!(r&&a)&&(0,F.jsx)(_e.jW,{className:"left-pane",minSize:385,children:t}),!!r&&o&&(0,F.jsx)(_e.nN,{style:{margin:"0 8px"}}),!!r&&(0,F.jsx)(_e.jW,{className:"right-pane",minSize:410,size:600,children:n})]})},Fe=a.memo(Se),Ie=n(2138),De=n(6698),Ke=n(4669),Te=n(833),Me=n(3728),Le=function(){var e,t=(0,Me.a)(),n=(0,De.Z)(),c=n.width,d=n.height,f=p(""),x=f.data,y=f.isFetching,Z=f.isLoading,j=f.error,b=h(),w=(0,o.Z)(b,2),k=w[0],C=w[1],_=C.isLoading,S=C.error,I=v(),K=(0,o.Z)(I,2),T=K[0],L=K[1],O=L.isLoading,P=L.error,E=m(),q=(0,o.Z)(E,2),N=q[0],V=q[1],A=V.isLoading,R=V.error,Q=g("").data,B=(0,a.useMemo)((function(){var e=Object.entries(r).map((function(e){var t=(0,o.Z)(e,2);return{id:t[0],name:t[1]}})),t=Object.entries(i).map((function(e){var t=(0,o.Z)(e,2);return{id:t[0],name:t[1]}}));return{customers:Q,subjects:e,statuses:t}}),[Q]),U=(0,Te.x)(),Y=U.selectedItem,G=U.changeSelectedItem,W=U.resetSelectedItem,X=U.onRowClick,H=U.rowSelection,te=U.selectedRowKeys,ne=U.setSelectedRowKeys,re=(0,a.useMemo)((function(){return J()}),[]),ie=(0,a.useMemo)((function(){return{x:"max-content",y:d-260}}),[d]),oe=(0,a.useMemo)((function(){return{showTotal:function(e){return(0,F.jsxs)(l.Z.Title,{style:{margin:0,lineHeight:"32px"},level:5,children:["\u0412\u0441\u0435\u0433\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432: ",e]})},showSizeChanger:!0}}),[]),ae=function(e,t){var n=(0,a.useState)("all"),r=(0,o.Z)(n,2),i=r[0],l=r[1],u=(0,a.useCallback)((function(e){return l(e)}),[]),s=(0,a.useMemo)((function(){return null!==t&&void 0!==t&&t.length?"user"===i?null===t||void 0===t?void 0:t.filter((function(t){return t.created_by.id===e})):t:[]}),[t,i,e]);return{userFilter:i,toggleFilter:u,filteredEntities:s}}(t.id,x),le=ae.filteredEntities,ue=ae.userFilter,ce=ae.toggleFilter,de=function(e){var t=(0,a.useState)(!0),n=(0,o.Z)(t,2),r=n[0],i=n[1],l=(0,a.useCallback)((function(){return i(!1)}),[]),u=(0,a.useCallback)((function(){return i(!0)}),[]),s=(0,a.useState)("1"),c=(0,o.Z)(s,2),d=c[0],f=c[1],m=(0,a.useCallback)((function(e){return f(e)}),[]),h=(0,a.useCallback)((function(){u(),e()}),[u,e]);return{edit:r,onEdit:l,offEdit:u,activeKey:d,toggleActiveKey:m,onCloseTabs:h}}(W),fe=de.activeKey,me=de.toggleActiveKey,ve=de.edit,xe=de.offEdit,ye=de.onEdit,Ze=de.onCloseTabs,be=function(){var e=(0,a.useState)(!1),t=(0,o.Z)(e,2),n=t[0],r=t[1];return[n,(0,a.useCallback)((function(){return r(!0)}),[]),(0,a.useCallback)((function(){return r(!1)}),[])]}(),we=(0,o.Z)(be,3),ke=we[0],_e=we[1],Se=we[2],Le=(0,Ke.d)(),Oe=(0,o.Z)(Le,3),Pe=Oe[0],Ee=Oe[1],qe=Oe[2],Ne=(0,a.useCallback)($,[]),Ve=(0,a.useCallback)(ee,[]),Ae=se({user:t,createDeal:N,deleteDeal:k,updateDeal:T,createClose:Se,selectedRowKeys:te,setSelectedRowKeys:ne,resetSelectedItem:W,selectedItem:Y,changeSelectedItem:G,offEdit:xe}),Re=Ae.createInitialValues,Qe=Ae.onCreate,ze=Ae.onUpdate,Be=Ae.onGroupDelete,Ue=(0,a.useMemo)((function(){return[{key:"1",label:"\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435",children:(0,F.jsx)(je,{onFinish:ze,getFields:Ne,error:P,loading:O,edit:ve,offEdit:xe,selected:Y,catalogs:B})},{key:"2",label:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",children:(0,F.jsx)(z,{data:null===Y||void 0===Y?void 0:Y.history_log,title:null===Y||void 0===Y?void 0:Y.name})}]}),[ze,P,O,ve,Y]);return(0,F.jsxs)(Ie.F,{children:[(0,F.jsx)(Fe,{selectedItem:Y,width:c,mainSection:(0,F.jsxs)("section",{className:"main-section",children:[(0,F.jsx)(pe.Z,{deleteDisable:!te.length,deleteLoading:_,userFilter:ue,onChangeFilter:ce,onOpenCreate:_e,onDelete:Be,userSelect:!0}),(0,F.jsx)(M.Z,{columns:re,dataSource:le,rowSelection:H,loading:y||Z,scroll:ie,onRow:X,pagination:oe}),(!!j||!!S)&&(0,F.jsx)(u.Z,{message:JSON.stringify(j||S),type:"error"})]}),viewSection:(0,F.jsx)(Ce,{activeKey:fe,toggleActiveKey:me,tabsBar:(0,F.jsx)(D,{activeKey:fe,edit:ve,onEdit:ye,isAttachments:!(null===Y||void 0===Y||null===(e=Y.attachments)||void 0===e||!e.length),openAttachments:Ee,onClose:Ze}),tabsItems:Ue})}),(0,F.jsx)(s.Z,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440",placement:"right",onClose:Se,open:ke,width:c>700?530:c,children:(0,F.jsx)(ge,{getFields:Ve,onFinish:Qe,error:R,loading:A,initialValues:Re,catalogs:B})}),(0,F.jsx)(he,{attachments:null===Y||void 0===Y?void 0:Y.attachments,isModalVisible:Pe,hideModal:qe})]})}},4669:function(e,t,n){"use strict";n.d(t,{d:function(){return o}});var r=n(9439),i=n(2791),o=function(){var e=(0,i.useState)(!1),t=(0,r.Z)(e,2),n=t[0],o=t[1];return[n,(0,i.useCallback)((function(){return o(!0)}),[]),(0,i.useCallback)((function(){return o(!1)}),[])]}},833:function(e,t,n){"use strict";n.d(t,{x:function(){return o}});var r=n(9439),i=n(2791),o=function(){var e=(0,i.useState)(null),t=(0,r.Z)(e,2),n=t[0],o=t[1],a=(0,i.useCallback)((function(e){return o(e)}),[]),l=(0,i.useCallback)((function(){return o(null)}),[]),u=(0,i.useState)([]),s=(0,r.Z)(u,2),c=s[0],d=s[1],f=(0,i.useCallback)((function(e){d(e)}),[]),m=(0,i.useMemo)((function(){return{selectedRowKeys:c,onChange:f}}),[f,c]),h=(0,i.useCallback)((function(e){return{onClick:function(){return a(e)}}}),[]);return{selectedItem:n,changeSelectedItem:a,resetSelectedItem:l,selectedRowKeys:c,setSelectedRowKeys:d,rowSelection:m,onRowClick:h}}},3728:function(e,t,n){"use strict";n.d(t,{a:function(){return i}});var r=n(4917),i=function(){return(0,r.CG)((function(e){return{id:e.user.id,name:e.user.name,email:e.user.email}}))}},3036:function(e,t){"use strict";t.Z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(!e)return"0";if(0===t)return e.toString();for(var r="",i=-1===n||"string"===typeof e?e.toString():e.toFixed(n);i;){var o=i.slice(-t);r=" "+o+r;var a=i.length;i=a-t>0?i.slice(0,a-t):""}return r.trim()}},4654:function(){}}]);
//# sourceMappingURL=236.bd8a0555.chunk.js.map