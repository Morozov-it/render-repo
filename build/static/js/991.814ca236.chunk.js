"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[991],{812:function(e,t,n){n.d(t,{Dg:function(){return i},nl:function(){return o},wD:function(){return a},wO:function(){return u}});var r=n(667).m.injectEndpoints({endpoints:function(e){return{fetchCountries:e.query({query:function(){return{url:"/directoriesGeographyCountries"}},providesTags:[{type:"GeographyCountries",id:"LIST"}]}),createCountry:e.mutation({query:function(e){return{url:"/directoriesGeographyCountries",method:"POST",body:e}},onQueryStarted:function(e,t){var n=t.dispatch;t.queryFulfilled.then((function(e){var t=e.data;n(r.util.updateQueryData("fetchCountries","",(function(e){e.push(t)})))}))}}),updateCountry:e.mutation({query:function(e){return{url:"/directoriesGeographyCountries/".concat(e.id),method:"PUT",body:e}},onQueryStarted:function(e,t){var n=t.dispatch;t.queryFulfilled.then((function(e){var t=e.data;n(r.util.updateQueryData("fetchCountries","",(function(e){var n=e.find((function(e){return e.id===t.id}));n&&Object.assign(n,t)})))}))}}),deleteCountry:e.mutation({query:function(e){return{url:"/directoriesGeographyCountries/".concat(e),method:"DELETE"}},invalidatesTags:[{type:"GeographyCountries",id:"LIST"}]})}}}),i=r.useCreateCountryMutation,o=r.useDeleteCountryMutation,a=r.useFetchCountriesQuery,u=r.useUpdateCountryMutation},6991:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var r=n(9439),i=n(2791),o=n(1541),a=n(785),u=n(3166),d=n(667).m.injectEndpoints({endpoints:function(e){return{fetchLocalities:e.query({query:function(){return{url:"/directoriesGeographyLocalities"}},providesTags:[{type:"GeographyLocalities",id:"LIST"}]}),createLocality:e.mutation({query:function(e){return{url:"/directoriesGeographyLocalities",method:"POST",body:e}},onQueryStarted:function(e,t){var n=t.dispatch;t.queryFulfilled.then((function(e){var t=e.data;n(d.util.updateQueryData("fetchLocalities","",(function(e){e.push(t)})))}))}}),updateLocality:e.mutation({query:function(e){return{url:"/directoriesGeographyLocalities/".concat(e.id),method:"PUT",body:e}},onQueryStarted:function(e,t){var n=t.dispatch;t.queryFulfilled.then((function(e){var t=e.data;n(d.util.updateQueryData("fetchLocalities","",(function(e){var n=e.find((function(e){return e.id===t.id}));n&&Object.assign(n,t)})))}))}}),deleteLocality:e.mutation({query:function(e){return{url:"/directoriesGeographyLocalities/".concat(e),method:"DELETE"}},invalidatesTags:[{type:"GeographyLocalities",id:"LIST"}]})}}}),l=d.useCreateLocalityMutation,c=d.useDeleteLocalityMutation,s=d.useFetchLocalitiesQuery,f=d.useUpdateLocalityMutation,y=n(812),p=n(4467),h=n(2426),m=n.n(h),v=function(e,t){var n;return null===t||void 0===t||null===(n=t.find((function(t){return t.id===e})))||void 0===n?void 0:n.name},g=function(e){return null===e||void 0===e?void 0:e.map((function(e){return{text:e.name,value:e.id}}))},x=function(e){return[{title:"\u0421\u0442\u0440\u0430\u043d\u0430",dataIndex:"countryId",key:"countryId",filters:g(null===e||void 0===e?void 0:e.countries),onFilter:function(e,t){return t.countryId===e},render:function(t){return v(t,null===e||void 0===e?void 0:e.countries)},sorter:function(t,n){var r,i,o;return null!==(r=null===(i=v(t.countryId,null===e||void 0===e?void 0:e.countries))||void 0===i?void 0:i.localeCompare(null!==(o=v(n.countryId,null===e||void 0===e?void 0:e.countries))&&void 0!==o?o:""))&&void 0!==r?r:0},editable:!0,editCatalog:null===e||void 0===e?void 0:e.countries,editType:"select",width:200},{title:"\u0420\u0435\u0433\u0438\u043e\u043d",dataIndex:"regionId",key:"regionId",filters:g(null===e||void 0===e?void 0:e.regions),onFilter:function(e,t){return t.regionId===e},render:function(t){return v(t,null===e||void 0===e?void 0:e.regions)},sorter:function(t,n){var r,i,o;return null!==(r=null===(i=v(t.regionId,null===e||void 0===e?void 0:e.regions))||void 0===i?void 0:i.localeCompare(null!==(o=v(n.regionId,null===e||void 0===e?void 0:e.regions))&&void 0!==o?o:""))&&void 0!==r?r:0},editable:!0,editCatalog:null===e||void 0===e?void 0:e.regions,editType:"select",width:200},{title:"\u0420\u0430\u0439\u043e\u043d",dataIndex:"district",key:"district",customFilter:"search",sorter:function(e,t){return e.district.localeCompare(t.district)},editable:!0,width:200},{title:"\u041f\u0440\u0435\u0444\u0438\u043a\u0441 \u0440\u0430\u0439\u043e\u043d\u0430",dataIndex:"districtPrefix",key:"districtPrefix",customFilter:"search",align:"center",sorter:function(e,t){return e.districtPrefix.localeCompare(t.districtPrefix)},editable:!0,width:120},{title:"\u041d\u0430\u0441\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u0443\u043d\u043a\u0442",dataIndex:"name",key:"name",customFilter:"search",sorter:function(e,t){return e.name.localeCompare(t.name)},editable:!0,width:200},{title:"\u041f\u0440\u0435\u0444\u0438\u043a\u0441 \u043d\u0430\u0441.\u043f\u0443\u043d\u043a\u0442\u0430",dataIndex:"namePrefix",key:"namePrefix",customFilter:"search",align:"center",sorter:function(e,t){return e.namePrefix.localeCompare(t.namePrefix)},editable:!0,width:120},{title:"\u041f\u043e\u0441\u0435\u043b\u0435\u043d\u0438\u0435",dataIndex:"area",key:"area",customFilter:"search",sorter:function(e,t){var n,r,i;return null!==(n=null===(r=e.area)||void 0===r?void 0:r.localeCompare(null!==(i=t.area)&&void 0!==i?i:""))&&void 0!==n?n:0},editable:!0,width:200},{title:"\u041f\u0440\u0435\u0444\u0438\u043a\u0441 \u043f\u043e\u0441\u0435\u043b\u0435\u043d\u0438\u044f",dataIndex:"areaPrefix",key:"areaPrefix",customFilter:"search",align:"center",sorter:function(e,t){var n,r,i;return null!==(n=null===(r=e.areaPrefix)||void 0===r?void 0:r.localeCompare(null!==(i=t.areaPrefix)&&void 0!==i?i:""))&&void 0!==n?n:0},editable:!0,width:120},{title:"\u041a\u0435\u043c \u0441\u043e\u0437\u0434\u0430\u043d\u043e",dataIndex:["created_by","name"],key:"created_by",customFilter:"search",align:"center",sorter:function(e,t){return e.created_by.name.localeCompare(t.created_by.name)},width:150,editable:!1,responsive:["xxl"]},{title:"\u041a\u043e\u0433\u0434\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u043e",dataIndex:"created_date",key:"created_date",customFilter:"date-picker",render:function(e){return e?m()(e).format("L"):"-"},sorter:function(e,t){return m()(e.created_date).diff(t.created_date)},align:"center",width:150,editable:!1,responsive:["xxl"]},{title:"\u041a\u0435\u043c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043e",dataIndex:["updated_by","name"],key:"updated_by",customFilter:"search",align:"center",sorter:function(e,t){var n,r,i,o;return null!==(n=null===(r=e.updated_by)||void 0===r?void 0:r.name.localeCompare(null!==(i=null===(o=t.updated_by)||void 0===o?void 0:o.name)&&void 0!==i?i:""))&&void 0!==n?n:0},render:function(e){return null!==e&&void 0!==e?e:"-"},width:150,editable:!1,responsive:["xxl"]},{title:"\u041a\u043e\u0433\u0434\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043e",dataIndex:"updated_date",key:"updated_date",customFilter:"date-picker",render:function(e){return e?m()(e).format("L LT"):"-"},sorter:function(e,t){return m()(e.updated_date).diff(t.updated_date)},align:"center",width:150,editable:!1,responsive:["xxl"]}]},w=n(6005),C=n(7129),b=n(184),L=function(e,t){return[{key:"countryId",name:[e,"countryId"],style:{width:150},rules:[{required:!0,message:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0443"}],children:(0,b.jsx)(C.K,{catalog:null===t||void 0===t?void 0:t.countries,placeholder:"\u0421\u0442\u0440\u0430\u043d\u0430"})},{key:"regionId",name:[e,"regionId"],style:{width:150},rules:[{required:!0,message:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0435\u0433\u0438\u043e\u043d"}],children:(0,b.jsx)(C.K,{catalog:null===t||void 0===t?void 0:t.regions,placeholder:"\u0420\u0435\u0433\u0438\u043e\u043d"})},{key:"district",name:[e,"district"],style:{width:150},rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0440\u0430\u0439\u043e\u043d"}],children:(0,b.jsx)(w.Z,{placeholder:"\u0420\u0430\u0439\u043e\u043d"})},{key:"districtPrefix",name:[e,"districtPrefix"],style:{width:80},rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0435\u0444\u0438\u043a\u0441"}],children:(0,b.jsx)(w.Z,{placeholder:"\u041f\u0440\u0435\u0444\u0438\u043a\u0441 \u0440-\u043d\u0430"})},{key:"name",name:[e,"name"],style:{width:200,flexGrow:1},rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u0443\u043d\u043a\u0442"}],children:(0,b.jsx)(w.Z,{placeholder:"\u041d\u0430\u0441\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u0443\u043d\u043a\u0442"})},{key:"namePrefix",name:[e,"namePrefix"],style:{width:80},rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0435\u0444\u0438\u043a\u0441"}],children:(0,b.jsx)(w.Z,{placeholder:"\u041f\u0440\u0435\u0444\u0438\u043a\u0441 \u043f\u0443\u043d\u043a\u0442\u0430"})},{key:"area",name:[e,"area"],style:{width:150},children:(0,b.jsx)(w.Z,{placeholder:"\u041f\u043e\u0441\u0435\u043b\u0435\u043d\u0438\u0435"})},{key:"areaPrefix",name:[e,"areaPrefix"],style:{width:80},children:(0,b.jsx)(w.Z,{placeholder:"\u041f\u0440\u0435\u0444\u0438\u043a\u0441 \u043f\u043e\u0441\u0435\u043b\u0435\u043d\u0438\u044f"})}]},k=n(4165),I=n(1413),Z=n(5861),F=n(419),P=function(e){var t=e.user,n=e.createLocality,r=e.deleteLocality,o=e.updateLocality,a=e.editForm,u=e.hideCreateModal,d=e.cancelEdit,l=e.selectedRowKeys,c=e.setSelectedRowKeys,s=(0,i.useCallback)((function(e){return n(e)}),[]),f=(0,i.useCallback)(function(){var e=(0,Z.Z)((0,k.Z)().mark((function e(n){var r,i;return(0,k.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(r=n.localities)||void 0===r||!r.length){e.next=3;break}return i={type:"geographyLocalities",deleted:!1,created_by:t,created_date:m()().toISOString(),updated_by:null,updated_date:null},e.abrupt("return",Promise.all(n.localities.map((function(e){return s((0,I.Z)((0,I.Z)({},i),e)).unwrap()}))).then((function(){F.ZP.success("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"),u()})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),y=(0,i.useCallback)(function(){var e=(0,Z.Z)((0,k.Z)().mark((function e(n){var r;return(0,k.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.validateFields();case 3:return(r=(0,I.Z)((0,I.Z)({},n),a.getFieldsValue())).updated_by=t,r.updated_date=m()().toISOString(),e.next=8,o(r).unwrap();case 8:F.ZP.success("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e"),d(),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),[t]),p=(0,i.useCallback)((function(e){return r(e)}),[]);return{onGroupCreate:f,onUpdate:y,onGroupDelete:(0,i.useCallback)((0,Z.Z)((0,k.Z)().mark((function e(){return(0,k.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Promise.all(l.map((function(e){return p(Number(e)).unwrap()}))).then((function(){F.ZP.success("\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e"),c([])}));case 1:case"end":return e.stop()}}),e)}))),[l])}},S=n(2138),q=n(863),T=n(5751),j=n(913),G=n(4137),R=n(180),_=n(6698),D=n(3728),E=n(833),M=n(4669),Q=n(9429),K=function(){var e=(0,D.a)(),t=(0,_.Z)(),n=t.width,d=t.height,h=s(""),m=h.data,v=h.isLoading,g=h.isFetching,w=h.error,C=f(),k=(0,r.Z)(C,2),I=k[0],Z=k[1],F=Z.isLoading,K=Z.error,O=l(),U=(0,r.Z)(O,2),z=U[0],N=U[1],J=N.isLoading,V=N.error,A=c(),B=(0,r.Z)(A,2),H=B[0],W=B[1],X=W.isLoading,Y=W.error,$=w||K||V||Y,ee=(0,y.wD)("").data,te=(0,p.Tz)("").data,ne=(0,i.useMemo)((function(){return{countries:ee,regions:null===te||void 0===te?void 0:te.map((function(e){return{id:e.id,name:e.name+" "+e.prefix}}))}}),[ee,te]),re=(0,M.d)(),ie=(0,r.Z)(re,3),oe=ie[0],ae=ie[1],ue=ie[2],de=(0,i.useCallback)(L,[]),le=(0,E.x)(),ce=le.rowSelection,se=le.selectedRowKeys,fe=le.setSelectedRowKeys,ye=(0,Q.k)(),pe=ye.edit,he=ye.editForm,me=ye.editingKey,ve=ye.isEditing,ge=ye.cancelEdit,xe=(0,i.useMemo)((function(){return{y:d-260}}),[d]),we=(0,i.useMemo)((function(){return{onChange:ge,showSizeChanger:!0}}),[]),Ce=(0,i.useMemo)((function(){return{body:{cell:G.nK}}}),[]),be=P({user:e,editForm:he,cancelEdit:ge,hideCreateModal:ue,selectedRowKeys:se,setSelectedRowKeys:fe,createLocality:z,deleteLocality:H,updateLocality:I}),Le=be.onUpdate,ke=be.onGroupCreate,Ie=be.onGroupDelete,Ze=(0,i.useMemo)((function(){return(0,R.U)({columns:x(ne),cancelEdit:ge,edit:pe,editingKey:me,isEditing:ve,loading:F,onSave:Le})}),[me,ne]),Fe=(0,i.useMemo)((function(){return null!==m&&void 0!==m?m:[]}),[m]);return(0,b.jsxs)(S.F,{children:[(0,b.jsxs)("section",{className:"main-section",children:[(0,b.jsx)(q.Z,{deleteDisable:!se.length,deleteLoading:X,onOpenCreate:ae,onDelete:Ie}),(0,b.jsx)(o.Z,{form:he,component:!1,children:(0,b.jsx)(T.Z,{components:Ce,columns:Ze,dataSource:Fe,rowSelection:ce,loading:g||v,scroll:xe,pagination:we})}),!!$&&(0,b.jsx)(a.Z,{message:JSON.stringify($),type:"error"})]}),(0,b.jsx)(u.Z,{open:oe,width:1200,title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",centered:!0,footer:null,onCancel:ue,children:(0,b.jsx)(j.Z,{name:"localities",getfields:de,loading:J,error:V,onFinish:ke,catalogs:ne,width:n})})]})}},4467:function(e,t,n){n.d(t,{L2:function(){return a},Tz:function(){return u},jz:function(){return i},l1:function(){return o}});var r=n(667).m.injectEndpoints({endpoints:function(e){return{fetchRegions:e.query({query:function(){return{url:"/directoriesGeographyRegions"}},providesTags:[{type:"GeographyRegions",id:"LIST"}]}),createRegion:e.mutation({query:function(e){return{url:"/directoriesGeographyRegions",method:"POST",body:e}},onQueryStarted:function(e,t){var n=t.dispatch;t.queryFulfilled.then((function(e){var t=e.data;n(r.util.updateQueryData("fetchRegions","",(function(e){e.push(t)})))}))}}),updateRegion:e.mutation({query:function(e){return{url:"/directoriesGeographyRegions/".concat(e.id),method:"PUT",body:e}},onQueryStarted:function(e,t){var n=t.dispatch;t.queryFulfilled.then((function(e){var t=e.data;n(r.util.updateQueryData("fetchRegions","",(function(e){var n=e.find((function(e){return e.id===t.id}));n&&Object.assign(n,t)})))}))}}),deleteRegion:e.mutation({query:function(e){return{url:"/directoriesGeographyRegions/".concat(e),method:"DELETE"}},invalidatesTags:[{type:"GeographyRegions",id:"LIST"}]})}}}),i=r.useCreateRegionMutation,o=r.useDeleteRegionMutation,a=r.useUpdateRegionMutation,u=r.useFetchRegionsQuery}}]);
//# sourceMappingURL=991.814ca236.chunk.js.map