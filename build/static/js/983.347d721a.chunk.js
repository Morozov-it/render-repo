"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[983],{812:function(e,t,n){n.d(t,{Dg:function(){return a},nl:function(){return o},wD:function(){return u},wO:function(){return i}});var r=n(667).m.injectEndpoints({endpoints:function(e){return{fetchCountries:e.query({query:function(){return{url:"/directoriesGeographyCountries"}},providesTags:[{type:"GeographyCountries",id:"LIST"}]}),createCountry:e.mutation({query:function(e){return{url:"/directoriesGeographyCountries",method:"POST",body:e}},onQueryStarted:function(e,t){var n=t.dispatch;t.queryFulfilled.then((function(e){var t=e.data;n(r.util.updateQueryData("fetchCountries","",(function(e){e.push(t)})))}))}}),updateCountry:e.mutation({query:function(e){return{url:"/directoriesGeographyCountries/".concat(e.id),method:"PUT",body:e}},onQueryStarted:function(e,t){var n=t.dispatch;t.queryFulfilled.then((function(e){var t=e.data;n(r.util.updateQueryData("fetchCountries","",(function(e){var n=e.find((function(e){return e.id===t.id}));n&&Object.assign(n,t)})))}))}}),deleteCountry:e.mutation({query:function(e){return{url:"/directoriesGeographyCountries/".concat(e),method:"DELETE"}},invalidatesTags:[{type:"GeographyCountries",id:"LIST"}]})}}}),a=r.useCreateCountryMutation,o=r.useDeleteCountryMutation,u=r.useFetchCountriesQuery,i=r.useUpdateCountryMutation},6983:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var r=n(9439),a=n(2791),o=n(1541),u=n(785),i=n(3166),d=n(812),c=n(2426),s=n.n(c),l=function(){return[{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",key:"name",customFilter:"search",sorter:function(e,t){return e.name.localeCompare(t.name)},editable:!0,width:300},{title:"\u041a\u043e\u0434",dataIndex:"code",key:"code",customFilter:"search",align:"center",sorter:function(e,t){return e.code.localeCompare(t.code)},editable:!0,width:120},{title:"\u041a\u0435\u043c \u0441\u043e\u0437\u0434\u0430\u043d\u043e",dataIndex:["created_by","name"],key:"created_by",customFilter:"search",align:"center",sorter:function(e,t){return e.created_by.name.localeCompare(t.created_by.name)},width:150,responsive:["xl"],editable:!1},{title:"\u041a\u043e\u0433\u0434\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u043e",dataIndex:"created_date",key:"created_date",customFilter:"date-picker",render:function(e){return e?s()(e).format("L"):"-"},sorter:function(e,t){return s()(e.created_date).diff(t.created_date)},align:"center",width:150,responsive:["xl"],editable:!1},{title:"\u041a\u0435\u043c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043e",dataIndex:["updated_by","name"],key:"updated_by",customFilter:"search",align:"center",sorter:function(e,t){var n,r,a,o;return null!==(n=null===(r=e.updated_by)||void 0===r?void 0:r.name.localeCompare(null!==(a=null===(o=t.updated_by)||void 0===o?void 0:o.name)&&void 0!==a?a:""))&&void 0!==n?n:0},render:function(e){return null!==e&&void 0!==e?e:"-"},width:150,responsive:["xxl"],editable:!1},{title:"\u041a\u043e\u0433\u0434\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043e",dataIndex:"updated_date",key:"updated_date",customFilter:"date-picker",render:function(e){return e?s()(e).format("L LT"):"-"},sorter:function(e,t){return s()(e.updated_date).diff(t.updated_date)},align:"center",width:150,responsive:["xxl"],editable:!1}]},p=n(6005),f=n(184),y=function(e){return[{key:"name",name:[e,"name"],style:{flexGrow:1},rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}],children:(0,f.jsx)(p.Z,{placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"})},{key:"code",name:[e,"code"],rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434"}],children:(0,f.jsx)(p.Z,{placeholder:"\u041a\u043e\u0434"})}]},h=n(4165),m=n(1413),g=n(5861),C=n(419),v=function(e){var t=e.user,n=e.createCountry,r=e.deleteCountry,o=e.updateCountry,u=e.editForm,i=e.hideCreateModal,d=e.cancelEdit,c=e.selectedRowKeys,l=e.setSelectedRowKeys,p=(0,a.useCallback)((function(e){return n(e)}),[]),f=(0,a.useCallback)(function(){var e=(0,g.Z)((0,h.Z)().mark((function e(n){var r,a;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(r=n.countries)||void 0===r||!r.length){e.next=3;break}return a={type:"geographyCountries",deleted:!1,created_by:t,created_date:s()().toISOString(),updated_by:null,updated_date:null},e.abrupt("return",Promise.all(n.countries.map((function(e){return p((0,m.Z)((0,m.Z)({},a),e)).unwrap()}))).then((function(){C.ZP.success("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"),i()})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),y=(0,a.useCallback)(function(){var e=(0,g.Z)((0,h.Z)().mark((function e(n){var r;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.validateFields();case 3:return(r=(0,m.Z)((0,m.Z)({},n),u.getFieldsValue())).updated_by=t,r.updated_date=s()().toISOString(),e.next=8,o(r).unwrap();case 8:C.ZP.success("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e"),d(),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),[t]),v=(0,a.useCallback)((function(e){return r(e)}),[]);return{onGroupCreate:f,onUpdate:y,onGroupDelete:(0,a.useCallback)((0,g.Z)((0,h.Z)().mark((function e(){return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Promise.all(c.map((function(e){return v(Number(e)).unwrap()}))).then((function(){C.ZP.success("\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e"),l([])}));case 1:case"end":return e.stop()}}),e)}))),[c])}},b=n(2138),w=n(863),x=n(5751),Z=n(913),k=n(4137),_=n(180),S=n(6698),F=n(3728),j=n(833),D=n(4669),G=n(9429),L=function(){var e=(0,F.a)(),t=(0,S.Z)(),n=t.width,c=t.height,s=(0,d.wD)(""),p=s.data,h=s.isLoading,m=s.isFetching,g=s.error,C=(0,d.wO)(),L=(0,r.Z)(C,2),E=L[0],I=L[1],M=I.isLoading,q=I.error,K=(0,d.Dg)(),O=(0,r.Z)(K,2),T=O[0],P=O[1],R=P.isLoading,Q=P.error,U=(0,d.nl)(),N=(0,r.Z)(U,2),z=N[0],J=N[1],V=J.isLoading,A=J.error,B=g||q||Q||A,H=(0,D.d)(),W=(0,r.Z)(H,3),X=W[0],Y=W[1],$=W[2],ee=(0,a.useCallback)(y,[]),te=(0,j.x)(),ne=te.rowSelection,re=te.selectedRowKeys,ae=te.setSelectedRowKeys,oe=(0,G.k)(),ue=oe.edit,ie=oe.editForm,de=oe.editingKey,ce=oe.isEditing,se=oe.cancelEdit,le=(0,a.useMemo)((function(){return{y:c-260}}),[c]),pe=(0,a.useMemo)((function(){return{onChange:se,showSizeChanger:!0}}),[]),fe=(0,a.useMemo)((function(){return{body:{cell:k.nK}}}),[]),ye=v({user:e,editForm:ie,cancelEdit:se,hideCreateModal:$,selectedRowKeys:re,setSelectedRowKeys:ae,createCountry:T,deleteCountry:z,updateCountry:E}),he=ye.onUpdate,me=ye.onGroupCreate,ge=ye.onGroupDelete,Ce=(0,a.useMemo)((function(){return(0,_.U)({columns:l(),cancelEdit:se,edit:ue,editingKey:de,isEditing:ce,loading:M,onSave:he})}),[de]),ve=(0,a.useMemo)((function(){return null!==p&&void 0!==p?p:[]}),[p]);return(0,f.jsxs)(b.F,{children:[(0,f.jsxs)("section",{className:"main-section",children:[(0,f.jsx)(w.Z,{deleteDisable:!re.length,deleteLoading:V,onOpenCreate:Y,onDelete:ge}),(0,f.jsx)(o.Z,{form:ie,component:!1,children:(0,f.jsx)(x.Z,{components:fe,columns:Ce,dataSource:ve,rowSelection:ne,loading:m||h,scroll:le,pagination:pe})}),!!B&&(0,f.jsx)(u.Z,{message:JSON.stringify(B),type:"error"})]}),(0,f.jsx)(i.Z,{open:X,title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",centered:!0,footer:null,onCancel:$,children:(0,f.jsx)(Z.Z,{name:"countries",getfields:ee,loading:R,error:Q,onFinish:me,width:n})})]})}}}]);
//# sourceMappingURL=983.347d721a.chunk.js.map